# Experience Rating using Bonus-Malus 

## Introduction

**Bonus-malus system**, yang digunakan secara bergantian sebagai "diskon tanpa kesalahan", "peringkat prestasi", "peringkat pengalaman" atau "diskon tanpa klaim" di berbagai negara, didasarkan pada pemberian sanksi kepada tertanggung yang bertanggung jawab atas satu atau beberapa klaim dengan biaya tambahan premi (malus), dan memberi penghargaan kepada tertanggung dengan diskon premi (bonus) jika tidak memiliki klaim. Sistem bonus-malus dapat dianggap sebagai implementasi komersial dari premi kredibilitas yang ideal seperti yang dibahas dalam Bab 9, di mana premi yang harus dibayar oleh tertanggung dihitung secara individual. Perusahaan asuransi menggunakan sistem bonus-malus untuk dua tujuan utama: untuk mendorong pengemudi agar mengemudi lebih hati-hati dalam satu tahun tanpa klaim, dan untuk memastikan tertanggung membayar premi yang sebanding dengan risiko mereka berdasarkan pengalaman klaim mereka melalui mekanisme peringkat pengalaman.

**No Claim Discount (NCD)** (NCD) adalah sistem peringkat pengalaman yang biasa digunakan dalam asuransi kendaraan bermotor. Sistem ini merupakan upaya untuk mengkategorikan tertanggung ke dalam kelompok-kelompok homogen yang membayar premi berdasarkan pengalaman klaim mereka. Tergantung pada aturan dalam skema, pemegang polis baru mungkin diminta untuk membayar premi penuh pada awalnya, dan mendapatkan diskon di tahun-tahun berikutnya sebagai hasil dari tahun-tahun bebas klaim. Sistem NCD memberikan penghargaan kepada pemegang polis yang tidak mengajukan klaim selama satu tahun. Dengan kata lain, sistem ini memberikan bonus kepada pengemudi yang berhati-hati. Prinsip bonus ini dapat mempengaruhi keputusan pemegang polis untuk mengklaim atau tidak mengklaim, terutama jika melibatkan kecelakaan dengan kerusakan kecil, yang dikenal sebagai fenomena 'lapar akan bonus'. Fenomena 'lapar akan bonus' dalam sistem NCD dapat mengurangi biaya klaim perusahaan asuransi, dan mungkin dapat mengimbangi penurunan pendapatan premi yang diharapkan.

##  Sistem NCD di Beberapa Negara

### Sistem NCD di Malaysia

Sebelum liberalisasi Tarif Motor pada 1 Juli 2017, peringkat asuransi motor di Malaysia diatur oleh Tarif Motor. Di bawah Tarif, tarif yang dikenakan tidak boleh lebih rendah dari tarif yang ditentukan di bawah kelas risiko, untuk memastikan bahwa persaingan harga di antara Penanggung tidak akan pergi di bawah tingkat ekonomi negara. Dasar Faktor peringkat yang dipertimbangkan adalah ruang lingkup asuransi, kapasitas kubik kendaraan dan perkiraan nilai kendaraan (atau uang pertanggungan, mana saja lebih rendah). Di bawah Tarif Motor, premi akhir yang harus dibayar disesuaikan oleh pengalaman klaim pemegang polis, atau setara, hak NCD-nya.

Efektif 1 Juli 2017, tarif premi asuransi kendaraan bermotor adalah diliberalisasi, atau dikurangi tarifnya. Harga premi sekarang ditentukan oleh perusahaan asuransi perorangan dan Takaful operator, dan konsumen mampu Nikmati pilihan produk asuransi motor yang lebih luas dengan harga bersaing. Karena liberalisasi tarif mendorong inovasi dan persaingan di antara Penanggung dan operator Takaful, premi didasarkan pada risiko yang lebih luas faktor selain dua faktor peringkat yang ditentukan dalam Tarif Motor, yaitu uang pertanggungan dan kapasitas kubik kendaraan. Faktor peringkat lainnya mungkin didefinisikan dalam profil risiko tertanggung, seperti usia kendaraan, usia pengemudi, fitur keselamatan dan keamanan kendaraan, geografis lokasi kendaraan dan pelanggaran lalu lintas pengemudi. Berbeda Penanggung dan operator takaful memiliki cara berbeda untuk mendefinisikan risiko Profil Tertanggung, harga polis mungkin berbeda dari satu penanggung ke yang lain. Namun, struktur NCD dari Tarif Motor tetap ada 'tidak berubah' dan terus ada, dan 'dapat dipindahtangankan' dari satu Penanggung, atau dari satu operator Takaful, ke operator Takaful lainnya.

Diskon dalam sistem NCD Malaysia dibagi menjadi enam kelas, Mulai dari kelas awal diskon 0%, diikuti oleh kelas Diskon 25%, 30%, 38.3%, 45% dan 55%. Gambar 12.1 menyediakan kelas-kelas Sistem NCD di Malaysia. Tahun bebas klaim menunjukkan bahwa pemegang polis berhak untuk maju selangkah ke kelas diskon berikutnya, seperti dari diskon 0% hingga diskon 25% di tahun perpanjangan. Jika a Pemegang Polis sudah berada di kelas tertinggi, yaitu sebesar 55% diskon, tahun bebas klaim menunjukkan bahwa pemegang polis tetap di kelas yang sama. Di sisi lain, jika satu atau lebih klaim dibuat dalam tahun ini, NCD akan hangus dan pemegang polis harus mulai dari Diskon 0% di tahun perpanjangan. Seperangkat aturan transisi ini juga bisa diringkas sebagai aturan -1 / Top, yaitu, kelas bonus untuk bebas klaim tahun, dan pindah ke kelas tertinggi setelah memiliki satu atau lebih klaim. Untuk tujuan ilustrasi, Gambar 12.1 menunjukkan kelas dan diagram transisi untuk sistem NCD Malaysia.

```{r fig.cap = '(ref:TranMalaysia)', fig.show="hold", out.width="45%", echo=FALSE}
knitr::include_graphics("images/FigureTransitionMsia.png")
knitr::include_graphics("images/gridMalayTable.png")
```

### Sistem NCD di Negara Lain

Sistem NCD di Brasil dibagi menjadi tujuh kelas, dengan mengikuti tingkat premium (Lemaire dan Zi 1994): 100, 90, 85, 80, 75, 70, dan 65. Tingkat premium ini juga setara dengan diskon berikut Kelas: 0%, 10%, 15%, 20%, 25%, 30% dan 45%. Pemegang polis baru harus: Mulai dari diskon 0%, atau pada tingkat premium 100, dan tahun bebas klaim menunjukkan bahwa pemegang polis dapat bergerak maju dengan diskon satu kelas. Jika satu atau Lebih banyak klaim yang terjadi dalam setahun, pemegang polis harus pindah satu kelas mundur untuk setiap klaim. Gambar 12.2 menunjukkan kelas dan diagram transisi untuk sistem NCD di Brasil. Seperangkat aturan transisi ini juga dapat diringkas sebagai aturan dari -1/+1, yaitu, kelas bonus untuk tahun bebas klaim, dan kelas malus untuk setiap klaim yang dilaporkan.

```{r fig.cap = '(ref:TransitionBrazil)', fig.show="hold", out.width="45%", echo=FALSE}
knitr::include_graphics("images/FigureTransitionBrazil.png")
knitr::include_graphics("images/gridBrazilTable.png")
```

Sistem NCD di Swiss dibagi menjadi dua puluh dua kelas, dengan level premium berikut: 270, 250, 230, 215, 200, 185, 170, 155, 140, 130, 120, 110, 100, 90, 80, 75, 70, 65, 60, 55, 50 dan 45 (Lemaire dan Zi 1994). Level-level ini adalah Juga setara dengan pemuatan berikut (malus): 170%, 150%, 130%, 115%, 100%, 85%, 70%, 55%, 40%, 30%, 20%, dan 10%, dan diskon berikut: 0%, 10%, 20%, 25%, 30%, 35%, 40%, 45%, 50% dan 55%. Pemegang polis baru memiliki untuk memulai dengan diskon 0%, atau pada tingkat premium 100, dan tahun bebas klaim menunjukkan bahwa pemegang polis dapat bergerak maju satu kelas. Jika satu atau lebih Klaim yang terjadi dalam tahun ini, pemegang polis harus pindah empat kelas mundur untuk setiap klaim. Tabel 12.1 dan Gambar 12.3 masing-masing menunjukkan kelas dan diagram transisi untuk sistem NCD di Swiss. Seperangkat aturan transisi ini dapat diringkas sebagai aturan -1/+4.

Table 12.1. **Classes of *NCD* (Switzerland)**

$$
\small{
\begin{array}{*{20}c}
\hline
\text{Classes} & \text{Loadings } (\%) & \text{Classes} & \text{Discounts } (\%)\\
\hline
{0} & {170} & {12} & {0}\\
{1} & {150} & {13} & {10}\\
{2} & {130} & {14} & {20}\\
{3} & {115} & {15} & {25}\\
{4} & {100} & {16} & {30}\\
{5} & {85} & {17} & {35}\\
{6} & {70} & {18} & {40}\\
{7} & {55} & {19} & {45}\\
{8} & {40} & {20} & {50}\\
{9} & {30} & {21} & {55}\\
{10} & {20} && \\
{11} & {10} && \\
\hline
\end{array}
}
$$

(ref:TransitionSwitz) **Transition Diagram for *NCD* Classes (Switzerland)**

```{r TransitionSwitz, echo=FALSE, fig.cap='(ref:TransitionSwitz)', out.width='60%', fig.align='center'}
knitr::include_graphics("images/FigureTransitionSwitz.png")
```

## Model Rantai BMS dan Markov

BMS dapat diwakili oleh waktu diskrit Rantai Markov. Proses stokastik dikatakan memiliki sifat Markov jika evolusi dari proses di masa depan hanya bergantung pada keadaan sekarang tetapi tidak pada masa lalu. Waktu diskrit Markov Chain adalah proses Markov dengan ruang keadaan diskrit.

### Probabilitas Transisi

Sebuah Rantai Markov ditentukan oleh probabilitas transisinya. Probabilitas transisi dari keadaan $i$ (pada waktu $n$) ke keadaan $j$  (pada waktu $n+1$) disebut probabilitas transisi satu langkah, dan dilambangkan dengan $p_{ij}(n,n+1) = Pr (X_{n + 1} = j|X_n = i)$, $i = 1,2,\ldots,k$, $j = 1,2,\ldots,k$. Untuk transisi umum dari waktu $m$ ke waktu $n$, untuk $m<n$, dengan mengkondisikan $X_{o}$ untuk $m\le o\le n$, kita memiliki persamaan Chapman-Kolmogorov dari 

\begin{equation}
p_{ij}(m,n)=\sum_{l\in S} p_{il}(m,o)p_{lj}(o,n).
\end{equation}

Sebuah Rantai Markov yang homogen waktu memenuhi properti $p_{ij}(n,n+t)=p_{ij}^{(t)}$ untuk semua $n$. Sebagai contoh, kita memiliki $p_{ij}(n,n+1)=p_{ij}^{(1)}\equiv p_{ij}$.  Dalam kasus ini, persamaan Chapman-Kolmogorov dapat ditulis sebagai 

\begin{equation}
p_{ij}(0,m+n)=\sum_{l\in S} p_{il}(0,m)p_{lj}(m,m+n)=\sum_{l\in S}p_{il}^{(m)}p_{lj}^{(n)}.
\end{equation}

Dalam konteks BMS, transisi kelas NCD diatur oleh probabilitas transisi pada tahun tertentu. Transisi kelas NCD juga merupakan Rantai Markov yang homogen waktu karena seperangkat aturan transisi tetap dan tidak bergantung pada waktu. Kita dapat mewakili probabilitas transisi satu langkah dengan a  $k \times k$ *transition matrix* ${\bf P}=(p_{ij})$ that corresponds to *NCD* classes $0,1,2,\ldots,k-1$.  

$$
\small{
{\bf P} = 
\left[ {\begin{array}{*{20}c}
p_{00} & p_{01} & \ldots & & & p_{0k-1} \\
p_{10} & p_{11} & \ldots & & & p_{1k-1} \\ 
\vdots & \ddots & & & & \vdots \\
p_{k-10} & p_{k-11} & \cdots & & & p_{k-1k-1}   
\end{array} } \right]
}
$$

Di sini, elemen ke-$(i,j)$ adalah probabilitas transisi dari state $i$ ke state $j$. Dengan kata lain, setiap baris dari mewakili transisi mengalir keluar dari state, sedangkan setiap kolom merepresentasikan transisi mengalir ke state. Penjumlahan dari transisi probabilitas mengalir keluar dari keadaan harus sama dengan 1, atau setiap baris dari matriks harus berjumlah 1, yaitu $\sum_jp_{ij} = 1$. Semua probabilitas juga harus tidak boleh negatif (karena mereka adalah probabilitas), yaitu $ p_{ij} \ge 0$.

Pertimbangkan sistem *NCD* Malaysia. Misalkan $\{X_{t}:t=0,1,2,\ldots\}$ adalah kelas *NCD* yang ditempati oleh pemegang polis pada waktu $t$ dengan ruang keadaan $S=\{0,1,2,3,4,5\}$. Oleh karena itu, probabilitas transisi pada tahun tanpa klaim sama dengan probabilitas transisi dari state $i$ ke state $i+1$, yaitu $p_{ii+1}$. Jika seorang tertanggung memiliki satu atau lebih klaim dalam satu tahun, probabilitas transisi kembali ke keadaan 0 diwakili oleh $p_{i0}=1-p_{ii+1}$. Oleh karena itu, sistem *NCD* Malaysia dapat diwakili oleh matriks transisi $6\times 6$ berikut ini:

$$
\small{
{\bf P} = 
\left[ {\begin{array}{*{20}c}
p_{00}&p_{01}&0&0&0&0\\
p_{10}&0&p_{12}&0&0&0\\
p_{20}&0&0&p_{23}&0&0\\
p_{30}&0&0&0&p_{34}&0\\
p_{40}&0&0&0&0&p_{45}\\
p_{50}&0&0&0&0&p_{55}
\end{array} }\right] = 
\left[ {\begin{array}{*{20}c}
{1 - p_{01}}&p_{01}&0&0&0&0\\
{1 - p_{12}}&0&p_{12}&0&0&0\\
{1 - p_{23}}&0&0&p_{23}&0&0\\
{1 - p_{34}}&0&0&0&p_{34}&0\\
{1 - p_{45}}&0&0&0&0&p_{45}\\
{1 - p_{55}}&0&0&0&0&p_{55}
\end{array} }\right]
}
$$

**Example 12.3.1.** Provide the transition matrix for the NCD system in Brazil.

Solusi **Solusi**

Berdasarkan kelas *NCD* dan diagram transisi yang ditunjukkan pada [Gambar 12.2], probabilitas tahun tanpa klaim sama dengan probabilitas bergerak maju satu kelas, sedangkan probabilitas memiliki satu atau lebih klaim dalam satu tahun sama dengan probabilitas bergerak mundur satu kelas untuk setiap klaim. Oleh karena itu, setiap baris dapat berisi dua atau lebih probabilitas transisi; satu probabilitas untuk maju ke berikutnya, dan satu atau lebih probabilitas untuk mundur satu kelas. Matriks transisi matriks transisi adalah:   

$$
\small{
{\bf P} = 
\left[ {\begin{array}{*{20}{c}}
{1 - p_{01}}&p_{01}&0&0&0&0&0\\
{1 - p_{12}}&0&p_{12}&0&0&0&0\\
{1 - \sum_j p_{2j}}&p_{21}&0&p_{23}&0&0&0\\
{1 - \sum_j p_{3j}}&p_{31}&p_{32}&0&p_{34}&0&0\\\
{1 - \sum_j p_{4j}}&p_{41}&p_{42}&p_{43}&0&p_{45}&0\\
{1 - \sum_j p_{5j}}&p_{51}&p_{52}&p_{53}&p_{54}&0&p_{56}\\
{1 - \sum_j p_{6j}}&p_{61}&p_{62}&p_{63}&p_{64}&p_{65}&p_{66}
\end{array} } \right]
}
$$

## BMS dan Distribusi Stasioner

### Distribusi Stasioner 

Distribusi stasioner dari Rantai Markov adalah distribusi probabilitas yang tetap tidak berubah seiring berjalannya waktu ke masa depan. Ini diwakili oleh vektor baris $\boldsymbol \pi =(\pi_{1},\pi_{2},\ldots,\pi_{k})$ dengan properti berikut:

\begin{align}
0\le \pi_{j}\le 1,\notag\\
\sum\limits_{j}\pi_{j}=1,\notag\\
\pi_{j}=\sum\limits_{i}\pi_{i}p_{ij}.
\end{align}

Persamaan terakhir dapat ditulis sebagai $\boldsymbol\pi \bf P=\boldsymbol\pi$. Dua kondisi pertama adalah diperlukan untuk distribusi probabilitas sedangkan sifat terakhir menunjukkan bahwa vektor baris $\boldsymbol\pi$ tidak berubah (yaitu tidak berubah) oleh transisi satu langkah matriks. Dengan kata lain, setelah Rantai Markov mencapai kondisi stasioner,
distribusi probabilitasnya akan tetap stasioner dari waktu ke waktu. Secara matematis,
vektor stasioner $\boldsymbol\pi$ juga dapat diperoleh dengan mencari vektor eigen kiri
dari matriks transisi satu langkah.

**Contoh 12.4.1.** Temukan distribusi stasioner untuk sistem NCD di Malaysia dengan asumsi bahwa probabilitas tahun tanpa klaim untuk semua kelas NCD adalah  $p_0$.

**Solusi** Matriks transisi dapat ditulis ulang sebagai:

$$
\small{
{\bf P} = 
\left[ {\begin{array}{*{20}c}
{1 - p_{0}}&p_{0}&0&0&0&0\\
{1 - p_{0}}&0&p_{0}&0&0&0\\
{1 - p_{0}}&0&0&p_{0}&0&0\\
{1 - p_{0}}&0&0&0&p_{0}&0\\
{1 - p_{0}}&0&0&0&0&p_{0}\\
{1 - p_{0}}&0&0&0&0&p_0
\end{array} }\right]
}
$$


Distribusi stasioner dapat dihitung dengan menggunakan $\pi_{j}=\sum\limits{i}\pi_{i}p_{ij}$. Solusinya adalah:

$$
\small{
\begin{array}{lll}
{\pi _0} = \sum\limits_i {\pi_i}p_{i0} = (1 - {p_0})\sum\limits_i {{\pi _i}} = 1 - {p_0}\\
{\pi _1} = \sum\limits_i {\pi _i}p_{i1} = {\pi_0}{p_{01}} = (1 - {p_0}){p_0}\\
{\pi _2} = \sum\limits_i {\pi _i}p_{i2} = {\pi _1}{p_{12}} = (1 - {p_0}){p_0}^2\\
{\pi _3} = \sum\limits_i {\pi _i}p_{i3} = {\pi _2}{p_{23}} = (1 - {p_0}){p_0}^3\\
{\pi _4} = \sum\limits_i {\pi _i}p_{i4} = {\pi _3}{p_{34}} = (1 - {p_0}){p_0}^4\\
{\pi _5} = \sum\limits_i {\pi _i}p_{i5} = {\pi _4}{p_{45}} + {\pi _5}{p_{55}} = (1 - {p_0}){p_0}^5 + {\pi _5}{p_0}\\
\therefore {\pi _5} = \frac{(1 - {p_0}){p_0}^5}{{(1 - {p_0})}} = {p_0}^5
\end{array}
}
$$

Distribusi stasioner yang ditunjukkan pada Contoh 12.4.1 mewakili distribusi asimtotik dari sistem PTM, atau distribusi dalam jangka panjang. Sebagai contoh, dengan asumsi bahwa probabilitas tahun tanpa klaim adalah  $p_0=0,90,$ Probabilitas stasioner adalah:

$$
\small{
\begin{array}{l}
{\pi _0} = 1 - {p_0} = 0.1000\\
{\pi _1} = (1 - {p_0}){p_0} = 0.0900\\
{\pi _2} = (1 - {p_0}){p_0}^2 = 0.0810\\
{\pi _3} = (1 - {p_0}){p_0}^3 = 0.0729\\
{\pi _4} = (1 - {p_0}){p_0}^4 = 0.0656\\
{\pi _5} = {p_0}^5 = 0.5905
\end{array}
}
$$

Dengan kata lain, ${\pi_0} = 0.10$ menunjukkan bahwa 10% tertanggung pada akhirnya akan masuk ke dalam kelas 0, ${\pi_1} = 0.09$ menunjukkan bahwa  9% tertanggung pada akhirnya akan masuk ke kelas 1, dan seterusnya, hingga ${\pi _5} = 0.59$, yang menunjukkan bahwa 59% dari tertanggung pada akhirnya akan masuk ke dalam kelas 5.

### Kode untuk Distribusi Stasioner `R`

Kita dapat menggunakan vektor eigen kiri dari matriks transisi untuk menghitung distribusi stasioner. Kode berikut dapat digunakan untuk Hitung vektor eigen kiri: `R`

**1. Membuat Matriks Transisi**

```{r}
#create transition matrix
entries = c(0.1,0.9,0,0,0,0,
            0.1,0,0.9,0,0,0,
            0.1,0,0,0.9,0,0,
            0.1,0,0,0,0.9,0,
            0.1,0,0,0,0,0.9,
            0.1,0,0,0,0,0.9)
(TP <- matrix(entries,nrow=6,byrow=TRUE) )
```

**2. Hitung nilai eigen dan vektor eigen menggunakan fungsi `eigen`**

```{r}
#hint -- left eigenvector is the same as right eigenvector of transpose 
#of transition matrix
eigenTP <- eigen(t(TP))
signif(eigenTP$values, digits = 3)
signif(eigenTP$vectors, digits = 3)
```

**3. Hitung vektor eigen kiri**

```{r LeftEigen3}
#divide entry of first column by sum of elements, so that entries sum to 1
#provide answers in 4 decimal places
signif(eigen(t(TP))$vectors[,1]/sum(eigen(t(TP))$vectors[,1]), digits = 4)
```

**Solusi.** 
Seperti yang diberikan di Bagian Lampiran \@ref(S:DiscreteDistributions), ketika jumlah klaim terdistribusi Poisson dengan parameter $\lambda=0.10$, probabilitas klaim $k$ adalah $p_k = \frac{e^{ - 0.1}{(0.1)}^k}{{k!}}, {\rm{ }}k = 0,1,2, \ldots.$

### Evolusi Premium

Kita mungkin tertarik untuk mengetahui evolusi premi rata-rata setelah $n$ tahun (atau $n$ langkah). Dalam sistem *NCD*, probabilitas transisi n langkah, $p_{ij}^{(n)}=\Pr(X_{n}=j|X_{0}=i)$, dapat digunakan untuk menghitung evolusi premi rata-rata. Probabilitas $p_{ij}^{(n)}$ dapat diperoleh sebagai elemen $(i,j)$ ke- dari pangkat $n$ ke- dari matriks transisi ${\bf P}$, yaitu, ${\bf P}^{n}$  

**Contoh 12.4.4**. Amati premi dalam 20 tahun di bawah sistem NCD di Malaysia, dengan asumsi bahwa probabilitas klaim adalah Poisson didistribusikan dengan parameter $λ=0,10$ dan premi sebelum menerapkan *PTM* adalah  $m=100$.

**Solusi. Di bawah NCD Malaysia, kami menggunakan probabilitas Poisson $p_k = \frac{e^{ - 0.1}{(0.1)}^k}{k!}$, hanya untuk  $k=0,1$. Oleh karena itu, matriks transisi pada tahun pertama adalah:

$$
\small{
{\bf{P}^{(1)}} = 
\left[{\begin{array}{*{20}{c}}
{0.0952}&{0.9048}&0&0&0&0\\
{0.0952}&0&{0.9048}&0&0&0\\
{0.0952}&0&0&{0.9048}&0&0\\
{0.0952}&0&0&0&{0.9048}&0\\
{0.0952}&0&0&0&0&{0.9048}\\
{0.0952}&0&0&0&0&{0.9048}
\end{array}} \right]
}
$$

Premi pada tahun pertama, setelah menerapkan *PTM*, adalah:

$$
\begin{aligned} 
&= \sum\limits_j \text{(premium)} \times 
\text{(average proportion in class } j) \times \text{(1 - *NCD* in class }j) \\
&= m\left[ \frac{\sum\limits_i {p_{i0}}}{6}{(1)} +
\frac{\sum\limits_i {p_{i1}}}{6}{(1 - 0.25)} + \ldots +
\frac{\sum\limits_i {p_{i5}}}{6}{(1 - 0.55)} \right]\\
&=
100[0.0952(1) + 0.1508(0.75) + \cdots + 0.3016(0.45)]\\
&= 62.55.
\end{aligned}
$$

Menggunakan langkah-langkah serupa, premi di $n$-th tahun untuk  $n = 2,...,20$ dapat diamati. Dari , premi dalam 20 tahun adalah: `R`

62.55, 59.87, 58.06, 57.06, 56.58, 56.58, 56.58, 56.58, 56.58, 56.58,

56.58, 56.58, 56.58, 56.58, 56.58, 56.58, 56.58, 56.58, 56.58, 56.58.

### Program untuk Evolusi Premium `R`

Kode berikut dapat digunakan untuk menemukan premi dalam tahun ke-n dan premi dalam 20 tahun di bawah sistem NCD di Malaysia (untuk temukan solusinya dalam Contoh 12.4.4).`R`

**1. Create a Transition Matrix**

```{r}
#create transition matrix
entries = c(0.0952,0.9048,0,0,0,0,
            0.0952,0,0.9048,0,0,0,
            0.0952,0,0,0.9048,0,0,
            0.0952,0,0,0,0.9048,0,
            0.0952,0,0,0,0,0.9048,
            0.0952,0,0,0,0,0.9048)
(TP <- matrix(entries,nrow=6,byrow=TRUE) )
```

**2. Create a function for the $n$th power of a square matrix**

```{r}
#create function for nth power of square matrix
powA <- function(n) { 
  if (n==1) return (TP)
  if (n==2) return (TP%*%TP)
  if (n>2) return ( TP%*%powA(n-1))}
#example for n=3
signif(powA(3), digits = 3)
```

**3. create function for premium in nth year**

```{r}
#define NCD percentage
NCD = c(1,.75,.7,.6167,.55,.45)

#create function for premium in nth year
p = numeric(0)
prem <- function(n){
  for (j in 1:length(NCD))
         p[j] = mean(powA(n)[,j])
         100*sum(p*NCD)
         }
#example for n=3
signif(prem(3), digits = 4)
```

**4.  Provide Premiums for 20 years**

```{r}
premium=numeric(0)
for (n in 1:20) {premium[n] = prem(n) }
signif(premium, digits = 4)
```

**Contoh 12.4.5.** Amati premi dalam 20 tahun di bawah sistem NCD di Brasil, dengan asumsi bahwa probabilitas $k$ klaim adalah $p_k = \frac{e^{-0.1}{(0.1)}^k}{k!}, \ \ k = 0,1,2,\ldots$, dan premi sebelum menerapkan *PTM* adalah  $m=100$.

**Solusi**. Matriks transisi untuk sistem NCD di Brasil adalah:

$$
{\bf P} = \left[
{\begin{array}{*{20}{c}}
{0.0952}&{0.9048}&0&0&0&0&0\\
{0.0952}&0&{0.9048}&0&0&0&0\\
{0.0047}&{0.0905}&0&{0.9048}&0&0&0\\
{0.0002}&{0.0045}&{0.0905}&0&{0.9048}&0&0\\
{0.0000}&{0.0002}&{0.0045}&{0.0905}&0&{0.9048}&0\\
{0.0000}&{0.0000}&{0.0002}&{0.0045}&{0.0905}&0&{0.9048}\\
{0.0000}&{0.0000}&{0.0000}&{0.0002}&{0.0045}&{0.0905}&{0.9048}
\end{array}} \right]
$$

Using `R`, the premiums in 20 years are:

76.69, 73.76, 71.31, 69.38, 67.92, 66.93, 66.40, 66.05, 65.88, 65.78,

65.72, 65.69, 65.67, 65.66, 65.66, 65.66, 65.66, 65.65, 65.65, 65.65.

Hasil dalam Contoh 12.4-5 memungkinkan kita untuk mengamati evolusi premi untuk sistem NCD di Malaysia dan Brasil dengan asumsi bahwa jumlah klaim didistribusikan dengan parameter  $λ=0,10$, dan premi sebelum menerapkan *PTM* adalah  $m=100$. Evolusi premi untuk kedua negara disediakan pada Tabel 12.4, dan ditunjukkan secara grafis pada Gambar 12.4.

Table 12.4. **Evolution of Premium (Malaysia and Brazil)**

$$
\small{
\begin{array}{ccc|ccc}
\hline
\text{Year} & \text{Premium} & \text{Premium} & \text{Year} & \text{Premium} & \text{Premium} \\
& \text{Malaysia} & \text{Brazil} & & \text{Malaysia} & \text{Brazil} \\
\hline
    0     & 100   & 100   & 11    & 56.58 & 65.72 \\
    1     & 62.55 & 76.69 & 12    & 56.58 & 65.69 \\
    2     & 59.87 & 73.76 & 13    & 56.58 & 65.67 \\
    3     & 58.06 & 71.31 & 14    & 56.58 & 65.66 \\
    4     & 57.06 & 69.38 & 15    & 56.58 & 65.66 \\
    5     & 56.58 & 67.92 & 16    & 56.58 & 65.66 \\
    6     & 56.58 & 66.93 & 17    & 56.58 & 65.66 \\
    7     & 56.58 & 66.40 & 18    & 56.58 & 65.65 \\
    8     & 56.58 & 66.05 & 19    & 56.58 & 65.65 \\
    9     & 56.58 & 65.88 & 20    & 56.58 & 65.65 \\
\hline
\end{array}
}
$$

(ref:PremEvolution) **Evolution of Premium (Malaysia and Brazil)**

```{r PremEvolution, echo=FALSE, fig.cap='(ref:PremEvolution)', out.width='60%', fig.align='center'}
knitr::include_graphics("images/FigureEvolution.png")
```

### Tingkat Konvergensi 

Kami mungkin juga tertarik untuk menentukan variasi antara probabilitas pada tahun ke-$n$ $p_{ij}^{(n)}$ dan probabilitas stasioner, $\pi _j$. Variasi antara probabilitas dapat diukur menggunakan: 

$$
\left| {average(p_{ij}^{(n)}) - {\pi _j}} \right|.
$$

Oleh karena itu, variasi total dapat diukur dengan jumlah variasi Di semua kelas:

\begin{equation}
\sum\limits_j {\left| {average(p_{ij}^{(n)}) - {\pi _j}} \right|}.
\end{equation}

Variasi total juga disebut Tingkat konvergensi karena mengukur tingkat konvergensi setelah  $n$ tahun (atau $n$ transisi). Lebih rendah Variasi total menyiratkan tingkat konvergensi yang lebih baik antara  $n$-langkah probabilitas transisi dan distribusi stasioner.

**Contoh 12.4.6.** Memberikan variasi total (tingkat konvergensi) dalam 20 tahun di bawah sistem NCD di Malaysia, dengan asumsi bahwa probabilitas klaim adalah Poisson didistribusikan dengan parameter  $λ=0,10$.

**Solution.**
Using `R`, probabilitas stasioner adalah:

$$
\left[ {\begin{array}{*{20}{c}}
{{\pi _0}}\\{{\pi_1}}\\{{\pi _2}}\\
{{\pi _3}}\\{{\pi _4}}\\{{\pi_5}}
\end{array}} \right]
= \left[ {\begin{array}{*{20}{c}}
{0.0952}\\{0.0861}\\{0.0779}\\
{0.0705}\\{0.0638}\\{0.6064}
\end{array}} \right]
$$

Matriks transisi pada tahun pertama adalah:

$$
{\bf{P}}^{(1)} = \left[
{\begin{array}{*{20}{c}}
{0.0952}&{0.9048}&0&0&0&0\\
{0.0952}&0&{0.9048}&0&0&0\\
{0.0952}&0&0&{0.9048}&0&0\\
{0.0952}&0&0&0&{0.9048}&0\\
{0.0952}&0&0&0&0&{0.9048}\\
{0.0952}&0&0&0&0&{0.9048}
\end{array}} \right]
$$

Variasi dapat dihitung sebagai:
$$
\begin{array}{l}
\left| {\sum\limits_i {\frac{p_{i0}^{}}{6}} - {\pi _0}} \right| = 0\\
\left|{\sum\limits_i {\frac{p_{i1}^{}}{6}} - {\pi _1}} \right| =
0.0647\\
\vdots \\
\left| {\sum\limits_i
\frac{p_{i5}}{6} - {\pi _5}} \right| =
.3048
\end{array}
$$

Oleh karena itu, variasi total pada tahun pertama adalah

$$
\sum\limits_j {\left| {\sum\limits_i {\frac{p_{ij}}{6} - {\pi _j}} } \right|} = 0.6096 .
$$

Using `R`, variasi total (atau tingkat konvergensi) dalam 20 tahun adalah:

0.6096, 0.3941, 0.2252, 0.0958, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.

### `R` Program untuk Tingkat Konvergensi

Kode berikut dapat digunakan untuk menghitung variasi total dalam `R` $n$-th tahun, dan total variasi (tingkat konvergensi) di 20 tahun di bawah sistem *NCD* di Malaysia (solusinya dalam Contoh 12.4.6).

**1. Recall the Transition Matrix**

```{r}
TP
```

**2. Create stationary probabilities**

```{r}
SP <- eigen(t(TP))$vectors[,1]/sum(eigen(t(TP))$vectors[,1])
signif(SP, digits = 3)
```

**3. Create a function for total variation in $n$th year**

```{r}
TV=function(n){
  dif  =numeric(0)
  for (j in 1:length(SP))
  dif[j]=abs(mean(powA(n)[,j])-SP[j])
  sum(dif)
  }
#example for n=1
signif(TV(1), digits = 4)
```

**4. Provide total variations (convergence rate) in 20 years**

```{r}
tot.var=numeric(0)
for (n in 1:20) {tot.var[n] = TV(n)}
signif(tot.var,4)
```

**Contoh 12.4.7.** Memberikan variasi total (atau tingkat konvergensi) dalam 20 tahun di bawah sistem NCD di Brasil, dengan asumsi bahwa jumlah klaim didistribusikan sebagai Poisson dengan parameter  $λ=0,10$.

**Solution.**
Using `R` code, variasi total (atau tingkat konvergensi) dalam 20 tahun untuk sistem *NCD* di Brasil adalah:

1.2617, 1.0536, 0.8465, 0.6412, 0.4362, 0.2316, 0.1531, 0.0747, 0.0480, 0.0232,

0.0145, 0.0071, 0.0043, 0.0021, 0.0013, 0.0006, 0.0004, 0.0002, 0.0001, 0.0001.

***

Contoh 12.4.6-7 memberikan tingkat konvergensi untuk dua *BMS* yang berbeda (dua negara yang berbeda). *BMS* Malaysia mencapai stasioner penuh hanya setelah lima tahun, sementara *BMS* di Brasil membutuhkan waktu lebih lama. Seperti disebutkan dalam @Lemaire98, *BMS* yang lebih canggih akan bertemu lebih lambat, dan dianggap sebagai kelemahan karena membutuhkan waktu lebih lama untuk stabil. Tujuan utama *BMS* adalah untuk memisahkan yang baik driver dari driver yang buruk, dan dengan demikian, diinginkan untuk memiliki proses klasifikasi yang dapat diselesaikan (atau distabilkan) segera setelah mungkin.

## BMS dan Peringkat Premium

### Peringkat Premium

Dalam pembuatan tarif asuransi motor, *BMS* adalah bentuk mekanisme penilaian posteriori untuk melengkapi penggunaan klasifikasi risiko *apriori* seperti yang dijelaskan dalam Bab 8. **Segmentasi** risiko a priori yang diperkenalkan dalam Bagian 8.1 membagi portofolio driver menjadi sejumlah kelas risiko homogen berdasarkan faktor peringkat yang dapat diamati (lihat Bagian 7.4.2), sehingga pemegang polis di kelas risiko yang sama membayar premi *apriori* yang sama. Alasan mendasar untuk menggunakan BMS yang bergantung pada informasi pengalaman klaim adalah untuk menangani heterogenitas residual dalam setiap kelas risiko homogen (misalnya, lihat diskusi sebelum Contoh 2.6.2) karena variabel yang dapat diamati jauh dari sempurna dalam memprediksi risiko perilaku mengemudi.

Mekanisme a posteriori yang ideal adalah kerangka kerja premi kredibilitas yang dikembangkan dalam Bab 9 dan khususnya Bagian 9.5 (see also @DionneVanasse89), di mana premi diturunkan secara individual untuk setiap pemegang polis dengan memasukkan a *priori* dan *a posteriori informasi*. Namun, penentuan premi individu seperti itu terlalu kompleks dari sudut pandang komersial untuk implementasi praktis oleh perusahaan asuransi motor. Untuk alasan ini, *BMS* adalah solusi yang disukai dan terdiri dari tiga blok bangunan berikut: (a) kelas BMS; (b) aturan transisi; (c) tingkat premi (juga dikenal sebagai relativitas premi atau koefisien penyesuaian premi).

Dua blok bangunan pertama telah ditentukan sebelumnya dan telah dibahas di bagian sebelumnya, sedangkan penentuan (bukan ditentukan sebelumnya seperti yang dibahas dalam kasus sistem Malaysia, Brasil dan Swiss) dari relativitas premi penting bagi perusahaan asuransi motor justru karena sifatnya yang saling melengkapi dan koreksi untuk memperhitungkan ketidaksempurnaan atau ketidakakuratan dalam a priori klasifikasi risiko. Perhatikan bahwa relativitas premi di bawah BMS berbeda dari ukuran relativitas yang didefinisikan dalam Bagian 7.4.2, yang merupakan rasio antara risiko yang diharapkan dari kelas risiko tertentu ke kelas risiko dasar, yang keduanya dihitung dari faktor peringkat yang dapat diamati. Dalam subbagian berikut, kami secara singkat memperkenalkan pengaturan pemodelan yang diperlukan untuk mempelajari penentuan relativitas optimal. Kami merujuk pembaca yang tertarik ke @Denuit07 untuk diskusi yang lebih lengkap tentang rincian teknis.

### Klasifikasi Risiko Apriori

Mari kita pertimbangkan sebuah portofolio dengan $n$ polis, di mana eksposur risiko (lihat Bagian 7.4.1) dari driver $i$ dilambangkan sebagai $m_{i}$.
dilambangkan sebagai $m_{i}$ dan jumlah klaim yang dilaporkan diwakili oleh $Y_{i}$, mengikuti notasi yang digunakan di Bagian 8.2.). Biarkan ${\bf x}_{i}^{T}=(x_{i1},x_{i2},\ldots, x_{iq})$ menjadi vektor variabel teramati 
variabel yang dapat diamati untuk $i=1,2,\ldots, n$. Regresi Poisson seperti yang dikembangkan di Bagian \@ref(S:RC:PoissonRegression) biasanya dipilih untuk memodelkan $Y_{i}$ di bawah kerangka kerja generalized linear models (GLM), lihat Bagian 13.3.2.2 dan juga @McCullaghNelder89.

Kita kemudian dapat menyatakan *prediksi frekuensi* klaim yang diharapkan untuk pemegang polis $i$ sebagai 

where $\hat{\beta}_{0},\hat{\beta}_{1},\ldots,\hat{\beta}_{q}$ are the estimated regression coefficients. In other words, $\lambda_{i}=\frac{\mu_{i}}{m_{i}}$ adalah frekuensi klaim yang diharapkan per unit eksposur, yang merupakan fokus utama dari klasifikasi risiko *apriori.*

### Pemodelan Heterogenitas Residual

Karena faktor-faktor yang tidak teramati yang dapat mempengaruhi perilaku mengemudi tidak diperhitungkan 
dalam memperkirakan frekuensi klaim yang diharapkan, perusahaan asuransi harus memperhitungkan 
untuk heterogenitas residual dalam setiap kelas risiko *a priori* dengan memperkenalkan 
komponen efek acak $\Theta_{i}$ ke dalam distribusi bersyarat $Y_{i}$.
Dengan $\Theta_{i}=\theta$, $Y_{i}$ mengikuti distribusi Poisson dengan rata-rata 
$\lambda_{i}\theta$, yaitu, 

\begin{equation}
\Pr(Y_{i}=k|\Theta_{i}=\theta)=\exp(-\lambda_{i}\theta)\frac{(\lambda_{i}\theta)^{k}}{k!},k=0,1,2,\ldots.
\end{equation}

Mengikuti dari pengaturan model gamma-Poisson di Bagian 9.5.1, kami selanjutnya mengasumsikan bahwa semua $\Theta_{i}$'s independen dan mengikuti  $(a,a)$  distribusi dengan fungsi densitas berikut seperti yang diperkenalkan dalam Lampiran 18.2

\begin{equation}
f(\theta)=\frac{1}{\Gamma(a)}a^{a}\theta^{a-1}\exp(-a\theta), \quad \theta > 0,
\end{equation}

di mana penggunaan campuran gamma-Poisson menghasilkan distribusi binomial negatif untuk $Y_i$ (lihat Bagian 2.6). Dengan spesifikasi tersebut, kami memperoleh $\mathrm{E}(\Theta_{i})=1$ dan karenanya $\mathrm{E}(Y_{i})=\mathrm{E}(\mathrm{E}(Y_{i}|\Theta_{i}))=\mathrm{E}(\lambda_{i}\Theta_{i})=\lambda_{i}$. menurut hukum harapan yang diulangi dalam Lampiran 16.2.1.\

Selanjutnya, dapat ditunjukkan bahwa distribusi posterior $\Theta| y_{1}=k_{1},y_{2}=k_{2},\ldots,y_{n}=k_{n}$  adalah gamma didistribusikan dengan Parameter $a+\sum_{j=1}^{n} k_{j}$ and $a+n\lambda_{i}$ dan  karena itu Bayesian Premi diberikan sebagai 
\begin{equation}
\mathrm{E}(\lambda_{i}\Theta| y_{1}=k_{1},\ldots,y_{n}=k_{n})=\lambda_{i}\times\frac{a+\sum_{j=1}^{n} k_{j}}{a+n\lambda_{i}}.
\end{equation}

Di sisi lain, menerapkan estimasi tertimbang kredibilitas Bühlmann di Bagian 9.3 ke model gamma-Poisson di Bagian 9.5.1, kami memperoleh

\begin{align*}
EPV&=\mathrm{E}(\mathrm{Var}(Y| \lambda_{i}))=\mathrm{E}(\lambda_{i}\Theta)=\lambda_{i},\\
VHM&=\mathrm{Var}(\mathrm{E}(Y| \lambda_{i}))=\mathrm{Var}(\lambda_{i}\Theta)=\frac{\lambda_{i}^{2}}{a},\\
K&=\frac{EPV}{VHM}=\frac{\lambda_{i}}{\frac{\lambda_{i}^{2}}{a}}=\frac{a}{\lambda_{i}},\\
Z&=\frac{n}{n+K}=\frac{n\lambda_{i}}{n\lambda_{i}+a},\\
\bar{Y}&=\frac{\sum_{j=1}^{n} y_{j}}{n}=\frac{\sum_{j=1}^{n} k_{j}}{n},\\ 
\mu&=\mathrm{E}(\mathrm{E}(Y_{i}| \lambda_{i}))=\mathrm{E}(\lambda_{i}\Theta)=\lambda_{i},
\end{align*}
dan karenanya perkiraan tertimbang kredibilitas sebagai 
\begin{align}
\mathrm{E}(\mathrm{E}(Y| \lambda_{i})| y_{1}=k_{1},\ldots,y_{n}=k_{n})&=\mathrm{E}(\lambda_{i}\Theta| y_{1}=k_{1},\ldots,y_{n}=k_{n})\notag\\
&=Z\times \bar{Y}+ (1-Z)\times \mu\notag\\
&=\frac{n\lambda_{i}}{n\lambda_{i}+a}\times \frac{\sum_{j=1}^{n} k_{j}}{n}+\frac{a}{n\lambda_{i}+a}\times\lambda_{i}\notag\\
&=\frac{\lambda_{i}(a+\sum_{j=1}^{n} k_{j})}{a+n\lambda_{i}},
\end{align}
that is, premi kredibilitas B&uuml;hlmann sama persis dengan premi Bayesian.

Terlepas dari kenyataan bahwa premi kredibilitas yang diperoleh secara individual di atas merupakan premi *a posteriori* yang ideal, dalam praktiknya perusahaan asuransi menggunakan BMS sebagai pendekatan diskrit untuk premi Bayesian, karena
struktur BMS yang relatif lebih sederhana dibandingkan dengan perhitungan individual premi kredibilitas.

### Distribusi Stasioner yang Memungkinkan Heterogenitas Residual

Misalkan seorang pengemudi dipilih secara acak dari portofolio yang telah 
diklasifikasikan ke dalam kelas risiko $h$ melalui penggunaan variabel *a priori* yang diamati. 
Frekuensi klaim yang diharapkan sebenarnya untuk driver ini diberikan oleh $\Lambda\Theta$,
di mana $\Lambda$ adalah frekuensi klaim yang diharapkan yang tidak diketahui *a priori* dan $\Theta$ 
adalah heterogenitas residual acak. Selanjutnya, mari kita nyatakan $w_{g}$ sebagai proporsi
dari pengemudi di kelas risiko $g$ ke-, yaitu, $w_{g}=\Pr(\Lambda=\lambda_{g})=\frac{n_{g}}{n}$
di mana $n_{g}$ adalah jumlah pengemudi yang diklasifikasikan dalam kelas risiko ke-g. Catatan
bahwa karena ada dua konsep kelas risiko yang berbeda (dari klasifikasi risiko *a priori*)
dan kelas *BMS* (atau *NCD*) (untuk mekanisme pemeringkatan *a posteriori*), untuk selanjutnya
selanjutnya dalam bab ini kami akan menyebut kelas *BMS* sebagai tingkat *BMS* sebagai gantinya 
untuk menghindari kebingungan yang tidak perlu.

Misalkan $p_{ij}^{\lambda}(\lambda\theta)$ adalah probabilitas transisi dari 
Tingkat *BMS* $i$ ke tingkat $j$ untuk pengemudi dengan frekuensi klaim yang diharapkan $\lambda\theta$ yang termasuk dalam kelas risiko dengan prediksi frekuensi klaim $\lambda$. Dengan kata lain,matriks transisi satu langkah dapat dituliskan sebagai ${\bf P}(\lambda\theta; \lambda)=\{p_{ij}^{\lambda}(\lambda\theta)\}$. Vektor baris dari distribusi stasioner distribusi $\boldsymbol \pi=(\pi_{0}^{\lambda}(\lambda\theta),\pi_{1}^{\lambda}(\lambda\theta),\ldots,\pi_{k-1}^{\lambda}(\lambda\theta))$ dapat diperoleh dengan menyelesaikan kondisi berikut:

\begin{align*}
\boldsymbol\pi(\lambda\theta;\lambda)&=\boldsymbol\pi(\lambda\theta;\lambda){\bf P}(\lambda\theta;\lambda)\\
\boldsymbol\pi(\lambda\theta;\lambda){\bf 1}&=1,
\end{align*}

di mana $\bf 1$ adalah vektor kolom dari $\bf 1$ dan $\pi_{\ell}^{\lambda}(\lambda\theta)$
adalah probabilitas stasioner untuk pengemudi dengan frekuensi klaim yang diharapkan sebenarnya dari
$\lambda\theta$ untuk berada di level $\ell$ ketika kondisi keseimbangan stabil 
tercapai dalam jangka panjang. Perhatikan bahwa dengan memasukkan efek acak
parameter $\theta$, ekspresi (bukan nilai numerik) untuk 
$\pi_{\ell}^{\lambda}(\lambda\theta)$ dapat ditemukan dengan menggunakan MATLAB, tetapi tidak dengan `R`.

Dengan pengaturan ini, probabilitas driver untuk tetap berada di level *BMS* $L=\ell$ untuk 
$\ell=0,1,\ldots,k-1$ dalam konteks seluruh portofolio dapat diperoleh sebagai

\begin{align}
\Pr(L=\ell)&=\sum\limits_{g=1}^{h}\Pr(L=\ell|\Lambda=\lambda_{g})\Pr(\Lambda=\lambda_{g})\notag\\
&=\sum\limits_{g=1}^{h}\Pr(\Lambda=\lambda_{g})\int_{0}^{\infty}\Pr(L=\ell|\Lambda=\lambda_{g},\Theta=\theta)f(\theta)d\theta\notag\\
&=\sum\limits_{g=1}^{h}w_{g}\int_{0}^{\infty}\pi_{\ell}^{\lambda_{g}}(\lambda_{g}\theta)f(\theta)d\theta.
\end{align}

### Penentuan Relativitas Optimal

**Relativitas optimal** untuk setiap tingkat BMS pertama kali diturunkan oleh @Norberg76 melalui minimalisasi fungsi objektif berikut, yang lebih umum dikenal sebagai kriteria Norberg:

\begin{equation*}
\min \mathrm{E}\left((\bar{\lambda}\Theta-\bar{\lambda}r_{L})^{2}\right)\equiv\min\mathrm{E}\left((\Theta-r_{L})^{2}\right),
\end{equation*}

di mana $\hat{\lambda}$ adalah frekuensi klaim yang diharapkan secara konstan untuk semua pemegang polis
tanpa adanya klasifikasi risiko *apriori* dan $r_{L}$ adalah relativitas premi untuk
Tingkat BMS $L$. @Pitrebois03 kemudian memasukkan informasi dari *a priori 
klasifikasi risiko ke dalam optimasi fungsi tujuan yang sama dari 

\begin{equation*}
\min\mathrm{E}\left((\Theta-r_{L})^{2}\right)
\end{equation*} 

untuk mendapatkan $r_{L}$ secara analitis. @Tan15 lebih lanjut mengusulkan minimalisasi dari fungsi objektif berikut

\begin{equation}
\min\mathrm{E}\left((\Lambda\Theta-\Lambda r_{L})^{2}\right), \text{ subject to } \mathrm{E}(r_{L})=1,
\end{equation}

di bawah kendala keseimbangan keuangan (yaitu, relativitas premi yang diharapkan sama dengan 1) untuk menentukan relativitas optimal dari *BMS* yang diberikan tingkat *BMS* yang telah ditentukan sebelumnya dan aturan transisi, di mana 

\begin{align*}
\min\mathrm{E}\left((\Lambda\Theta-\Lambda r_{L})^{2}\right)&=\sum\limits_{\ell=0}^{k-1}\mathrm{E}\left((\Lambda\Theta-\Lambda r_{L})^{2}|L=\ell\right)\Pr(L=\ell)\\
&=\sum\limits_{\ell=0}^{k-1}\mathrm{E}\left(\mathrm{E}\left((\Lambda\Theta-\Lambda r_{L})^{2}|L=\ell,\Lambda\right)|L=\ell\right)\Pr(L=\ell)\\
&=\sum\limits_{\ell=0}^{k-1}\sum\limits_{g=1}^{h}\mathrm{E}\left((\Lambda\Theta-\Lambda r_{L})^{2}|L=\ell,\Lambda=\lambda_{g}\right)\times\Pr\left(\Lambda=\lambda_{g}|L=\ell\right)\Pr(L=\ell)\\
&=\sum\limits_{\ell=0}^{k-1}\sum\limits_{g=1}^{h}\int_{0}^{\infty}(\lambda_{g}\theta-\lambda_{g}r_{\ell})^{2}\pi_{\ell}(\lambda_{g}\theta)w_{g}f(\theta)d\theta\\
&=\sum\limits_{g=1}^{h}w_{g}\int_{0}^{\infty}\sum\limits_{\ell=0}^{k-1}(\lambda_{g}\theta-\lambda_{g}r_{\ell})^{2}\pi_{\ell}(\lambda_{g}\theta)f(\theta)d\theta.
\end{align*}

Sangatlah penting bahwa relativitas optimal memiliki rata-rata 100\%, 
sehingga bonus dan minus saling mengimbangi satu sama lain untuk menghasilkan 
kondisi keseimbangan keuangan. Perhatikan bahwa pendekatan yang dipertimbangkan oleh @Pitrebois03 
tidak membutuhkan kendala keseimbangan finansial karena solusi analitis
untuk fungsi objektifnya diberikan oleh $r_{\ell}=\mathrm{E}(\Theta|L=\ell)$, jadi
mengikuti bahwa $\mathrm{E}(r_{L})=\mathrm{E}\left(\mathrm{E}(\Theta|L)\right) =\mathrm{E}(\Theta)=1$
dengan pilihan spesifik distribusi gamma $(a,a)$ untuk distribusi acak
komponen efek $\Theta $.

Dalam hal ini, masalah optimasi dapat diselesaikan dengan menentukan Lagrangian
sebagai 

\begin{align}
\mathcal{L}({\bf r}, \alpha)&=\mathrm{E}\left((\Lambda\Theta-\Lambda r_{L})^{2}\right)+\alpha(\mathrm{E}(r_{L})-1)\notag\\
&=\sum\limits_{\ell=0}^{k-1} \mathrm{E}\left((\Lambda\Theta-\Lambda r_{L})^{2}|L=\ell\right)\Pr(L=\ell)+\alpha\left(\sum\limits_{\ell=0}^{k-1}r_{\ell}\Pr(L=\ell)-1\right),\notag
\end{align}
where ${\bf r}=(r_{0},r_{1},\ldots,r_{k-1})^{T}$. Kondisi urutan pertama yang diperlukan diberikan sebagai berikut
\begin{align*}
\Pr(L=\ell)\times \left(2\mathrm{E}\left(\Lambda^{2}\Theta-\Lambda^{2}r_{L}|L=\ell\right)-\alpha\right)&=0, \qquad \ell=0,1,\ldots, k-1,\\
\sum\limits_{\ell=0}^{k-1}r_{\ell}\Pr(L=\ell)-1&=0.
\end{align*}
Finally, solusi yang ditetapkan untuk $\alpha$ and $r_{\ell}, \ell=0,1,\ldots,k-1$ diperoleh sebagai 
\begin{align*}
\alpha&=\frac{\left(\sum\limits_{\ell=0}^{k-1}\frac{\mathrm{E}(\Lambda^{2}\Theta|L=\ell)\Pr(L=\ell)}{\mathrm{E}(\Lambda^{2}|L=\ell)}\right)-1}{\sum\limits_{\ell=0}^{k-1}\frac{\Pr(L=\ell)}{2\mathrm{E}(\Lambda^{2}|L=\ell)}},\\
r_{\ell}&=\frac{\mathrm{E}(\Lambda^{2}\Theta|L=\ell)}{\mathrm{E}(\Lambda^{2}|L=\ell)}-\frac{\alpha}{2\mathrm{E}(\Lambda^{2}|L=\ell)},
\end{align*}
dimana 
\begin{align*}
\Pr(L=\ell)&=\sum\limits_{g=1}^{h}w_{g}\int_{0}^{\infty}\pi_{\ell}^{\lambda_{g}}(\lambda_{g}\theta)f(\theta)d\theta,\\
\mathrm{E}(\Lambda^{2}\Theta|L=\ell)&=\frac{\sum\limits_{g=1}^{h}w_{g}\int_{0}^{\infty}\lambda_{g}^{2}\theta\pi_{\ell}^{\lambda_{g}}(\lambda_{g}\theta)f(\theta)d\theta}{\sum\limits_{g=1}^{h}w_{g}\int_{0}^{\infty}\pi_{\ell}^{\lambda_{g}}(\lambda_{g}\theta)f(\theta)d\theta},\\
\mathrm{E}(\Lambda^{2}|L=\ell)&=\frac{\sum\limits_{g=1}^{h}w_{g}\int_{0}^{\infty}\lambda_{g}^{2}\pi_{\ell}^{\lambda_{g}}(\lambda_{g}\theta)f(\theta)d\theta}{\sum\limits_{g=1}^{h}w_{g}\int_{0}^{\infty}\pi_{\ell}^{\lambda_{g}}(\lambda_{g}\theta)f(\theta)d\theta}.
\end{align*}
Jika kita melakukan optimasi tanpa kendala keseimbangan keuangan, maka kita memperoleh
\begin{align*}
\alpha^{\text{unconstrained}}&=0,\\
r_{\ell}^{\text{unconstrained}}&=\frac{\mathrm{E}(\Lambda^{2}\Theta|L=\ell)}{\mathrm{E}(\Lambda^{2}|L=\ell)}.
\end{align*}

### Ilustrasi Numerik

Pada bagian ini, kami menyajikan dua ilustrasi numerik yang mengintegrasikan informasi *a priori* ke dalam penentuan relativitas optimal. Kami mempertimbangkan
mempertimbangkan tingkat *BMS* dan aturan transisi dari sistem Malaysia dan Brasil, tetapi memilih untuk menghitung himpunan relativitas optimal dan bukan 
tingkat premi tertentu yang diberikan sebelumnya. Dalam ilustrasi kami, kami juga mengasumsikan bahwa 3 nilai *a priori* frekuensi klaim yang diharapkan berikut ini diberikan 

$\lambda_{1}=0.1$,$\lambda_{2}=0.3$, and $\lambda_{3}=0.5$ dengan proporsi sebagai berikut 

$$
\Pr(\Lambda=\lambda_{1})=0.6, \Pr(\Lambda=\lambda_{2})=0.3, \Pr(\Lambda=\lambda_{3})=0.1.
$$

Kami juga mengasumsikan bahwa parameter gamma ditetapkan pada $a = 1,5$. Perhatikan bahwa meskipun asumsi-asumsi pemodelan ini sederhana, tujuannya di sini adalah untuk mendemonstrasikan 
penentuan relativitas optimal di bawah pengaturan yang relatif sederhana, dan bahwa prosedur optimasi untuk *BMS* tetap sama meskipun 
Klasifikasi risiko *a priori* dilakukan secara ekstensif. Kami merujuk pembaca yang tertarik pada data klaim kendaraan bermotor seperti yang didokumentasikan di @Dejong08 
untuk melakukan segmentasi risiko *a priori* sebelum melanjutkan ke penentuan relativitas optimal.

Lebih lanjut, seperti yang disebutkan sebelumnya, penyertaan parameter efek acak $\theta$ menyiratkan bahwa ekspresi yang diperlukan (bukan nilai numerik) untuk 
probabilitas stasioner $\pi_{\ell}^{\lambda}(\lambda\theta)$ yang akan digunakan 
untuk integral selanjutnya dapat ditemukan dengan menggunakan MATLAB tetapi tidak dengan `R`. Juga, karena 
bentuk probabilitas stasioner yang diperoleh agak rumit, dalam subbagian ini kita
kami memilih untuk tidak menyertakan kode `R` untuk penentuan relativitas optimal.
Lebih penting lagi, kami berharap bahwa kunci utama dari subbab ini adalah agar pembaca dapat
mendapatkan pemahaman konseptual yang solid secara keseluruhan tentang bagaimana memperhitungkan semua 
informasi yang relevan dalam desain sistem bonus-malus. 

Untuk *BMS* Malaysia dengan 6 level dan aturan transisi -1/Top,
nilai numerik yang diperoleh dari relativitas optimal disajikan dalam [Tabel 12.5]. 
bersama dengan probabilitas stasioner. Kami menemukan bahwa sekitar setengah dari pemegang polis
akan menempati tingkat *BMS* tertinggi dengan relativitas premi terendah dalam jangka panjang 
jangka panjang ketika kondisi stasioner telah tercapai. Kami juga mengamati bahwa batasan 
relativitas optimal lebih tinggi daripada yang tidak dibatasi karena
kebutuhan untuk memenuhi kendala keseimbangan keuangan.

<a id=tab:12.5></a> 

[Table 12.5]: \#tab:12.5

Table 12.5. **Optimal Relativities with $k=6$ levels and transition rule of  -1/Top**

$$
\small{
\begin{array}{*{20}c}
\hline
\text{Level }\ell & \Pr(L=\ell) & r_{\ell} & r_{\ell}^{\text{unconstrained}}\\
\hline
{0} & {16.22\%} & {131.99\%} & {126.33\%}\\
{1} & {11.29\%} & {127.33\%} & {120.66\%}\\
{2} & {8.49\%} & {120.64\%} & {113.03\%}\\
{3} & {6.69\%} & {113.93\%} & {105.44\%}\\
{4} & {5.44\%} & {107.79\%} & {98.47\%}\\
{5} & {51.87\%} & {78.06\%} & {63.15\%}\\
{E(r_{L})} & & {100\%} & {88.87\%} \\
\hline
\end{array}
}
$$

Selain itu, kami melihat bahwa kecuali untuk level *BMS* tertinggi (level 5), 
level *BMS* lainnya akan membebankan biaya tambahan malus kepada pemegang polis yang menempati 
yang menempati level tersebut. Temuan ini tidak mengejutkan karena kerangka teori kami 
kerangka teori kami di sini adalah untuk menentukan relativitas optimal mengingat perhitungan
premi dasar *a priori* dengan hanya mengandalkan informasi frekuensi klaim 
tetapi tidak dengan tingkat keparahan klaim. Dalam praktiknya, perusahaan asuransi dapat memperkenalkan 
Tingkat NCD hanya dengan diskon (bonus) tetapi tidak dengan beban (minus) karena 
premi dasar *a priori* telah dinaikkan dengan mempertimbangkan
informasi frekuensi klaim dan tingkat keparahan klaim. 

Untuk *BMS* Brasil dengan 7 tingkat dan aturan transisi -1/+1,
nilai numerik yang sesuai dari relativitas optimal ditunjukkan pada [Tabel 12.6]. 
Kami menemukan bahwa sekitar tiga perempat pemegang polis akan menempati level *BMS* tertinggi 
dengan relativitas premi terendah pada kondisi stasioner. Temuan ini adalah 
terutama disebabkan oleh penalti yang lebih ringan pada aturan transisi -1/+1 
dibandingkan dengan aturan -1/Top, sehingga lebih banyak pemegang polis yang diharapkan 
menempati tingkat *BMS* tertinggi. Mirip dengan contoh sebelumnya, kami menemukan bahwa relativitas optimal yang tidak dibatasi 
yang tidak dibatasi lebih rendah dan menghasilkan nilai $\mathrm{E}(r_{L})$ yang lebih rendah. 
<a id=tab:12.6></a> 

[Table 12.6]: \#tab:12.6

Table 12.6. **Optimal Relativities with $k=7$ levels and transition rule of  -1/+1**

$$
\small{
\begin{array}{*{20}c}
\hline
\text{Level }\ell & \Pr(L=\ell) & r_{\ell} & r_{\ell}^{\text{unconstrained}}\\
\hline
{0} & {3.28\%} & {234.94\%} & {228.65\%}\\
{1} & {2.21\%} & {196.24\%} & {189.27\%}\\
{2} & {2.00\%} & {168.36\%} & {160.59\%}\\
{3} & {2.38\%} & {145.96\%} & {137.03\%}\\
{4} & {4.02\%} & {125.53\%} & {114.63\%}\\
{5} & {10.38\%} & {106.25\%} & {91.12\%}\\
{6} & {75.74\%} & {85.89\%} & {61.74\%}\\
{E(r_{L})} & & {100\%} & {78.97\%} \\
\hline
\end{array}
}
$$

Perhatikan bahwa nilai yang diperoleh dari relativitas optimal mungkin tidak diinginkan untuk
implementasi komersial karena kemungkinan perbedaan yang tidak teratur 
yang tidak beraturan di antara tingkat *BMS* yang berdekatan. Untuk mengatasi masalah ini, perusahaan asuransi dapat mempertimbangkan 
memberlakukan relativitas optimal linier dalam bentuk $r_{L}^{\text{linear}}=a+bL$ 
dengan menyelesaikan optimasi terkendala berikut ini dengan kendala ketidaksamaan 

$$
\min\mathrm{E}\left((\Lambda\Theta-\Lambda a-\Lambda bL)^{2}\right) \text{ subject to }
a+b\mathrm{E}(L)\ge 1.
$$

Kami merujuk pembaca yang tertarik ke @Tan16 untuk berdiskusi tentang bagaimana memasukkan batasan komersial lebih lanjut dan juga solusi untuk masalah optimasi yang melibatkan kondisi Kuhn-Tucker. 

